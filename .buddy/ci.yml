- pipeline: "CI"
  on: "EVENT"
  events:
  - type: "PUSH"
    refs:
    - "(^((?!master$).)*$)"
  priority: "NORMAL"
  ignore_fail_on_project_status: true
  fetch_all_refs: true
  fail_on_prepare_env_warning: true
  clone_depth: 1
  actions:
  - action: "Execute: yarn run lint and tests"
    cache_base_image: true
    type: "BUILD"
    docker_image_name: "library/node"
    docker_image_tag: "16.9.1-alpine3.14"
    setup_commands:
    - "yarn install"
    execute_commands:
    - "yarn run lint"
    - "yarn run test"
    shell: "SH"
  - action: "Run CD"
    type: "RUN_NEXT_PIPELINE"
    comment: "Triggered by $BUDDY_PIPELINE_NAME execution #$BUDDY_EXECUTION_ID"
    revision: "INHERIT"
    next_project_name: "ui-kit"
    next_pipeline_name: "CD"
